get:
  operationId: getAllProductsWithCompanyPricing
  tags:
    - Products
    - Pricing
  summary: All products with company pricing
  description: |
    Retrieve ALL products in the system with pricing calculated for all active companies 
    or filtered by specific company IDs. Unlike company-specific endpoints, this returns 
    comprehensive pricing information for multiple companies in a single request.
    
    Each product will include a `company_prices` array containing pricing for each company 
    based on their assigned price levels, price groups, and applicable discounts or markups.
    
    This endpoint supports all the same filtering parameters as the regular products endpoint,
    allowing you to retrieve company pricing data for specific sets of products.
    
    For detailed information about the filtering system and available operators, 
    refer to the [Filter System Documentation](/filters).

    ## Available Filters
    ### String Filters
    - `name`: Product name
    - `description`: Product description
    - `sku`: Product SKU (searches both internal SKU and alternate SKUs)
    - `upc`: Product UPC/Barcode
    - `tag`: Product tags
    - `q`: General search matches name OR upc OR sku
    - `category.name`: Filter by category name
    - `sub_category.name`: Filter by sub-category name
    - `supplier.name`: Filter by supplier name
    
    ### Integer Filters
    - `category.id`: Filter by category ID
    - `sub_category.id`: Filter by sub-category ID
    - `supplier.id`: Filter by supplier ID
    
    ### Float Filters
    - `retail_price`: Product retail price
    - `wholesale_price`: Product wholesale price
    
    ### Boolean Filters
    - `sellable`: If the product is sellable or not
    - `discontinued`: If the product is discontinued
    
    ### DateTime Filters
    - `created_at`: When the product was created
    - `updated_at`: When the product was last updated
    
    ## Company Filtering
    Use the `company_id` parameter to filter pricing to specific companies:
    - Single company: `?company_id=1`
    - Multiple companies: `?company_id=1,2,3`
    
    ## Examples
    ```
    # Get all products with pricing for all companies
    /products/company-pricing
    
    # Get products with pricing for specific companies only
    /products/company-pricing?company_id=1,2
    
    # Find products by SKU with company pricing
    /products/company-pricing?sku[eq]=SKU-001
    
    # Find products with specific price range and company pricing
    /products/company-pricing?retail_price[gte]=50.00&retail_price[lte]=100.00
    
    # Find products by category with company pricing
    /products/company-pricing?category.name[eq]=Electronics
    ```
  security:
    - BearerAuth: []
  parameters:
    - in: query
      name: company_id
      schema:
        type: string
      description: |
        Filter pricing to specific company IDs. Can be a single ID or comma-separated list.
        If not provided, pricing for all active companies will be included.
      example: "1,2,3"
    - in: query
      name: page
      schema:
        type: integer
        default: 1
      description: Page number for pagination
    - in: query
      name: per_page
      schema:
        type: integer
        default: 10
        maximum: 100
      description: Number of items per page (max 100)
    - in: query
      name: q
      schema:
        type: string
      description: Filter by name OR upc OR sku
    - in: query
      name: name
      schema:
        type: string
      description: Filter by product name
    - in: query
      name: description
      schema:
        type: string
      description: Filter by product description
    - in: query
      name: sku
      schema:
        type: string
      description: Filter by SKU (searches both internal and alternate SKUs)
    - in: query
      name: upc
      schema:
        type: string
      description: Filter by UPC/Barcode
    - in: query
      name: sellable
      schema:
        type: boolean
      description: Filter by sellable status
    - in: query
      name: discontinued
      schema:
        type: boolean
      description: Filter by whether the product is discontinued
    - in: query
      name: retail_price
      schema:
        type: number
        format: float
      description: Filter by retail price
    - in: query
      name: wholesale_price
      schema:
        type: number
        format: float
      description: Filter by wholesale price
    - in: query
      name: created_at
      schema:
        type: string
        format: date-time
      description: Filter by creation date
    - in: query
      name: updated_at
      schema:
        type: string
        format: date-time
      description: Filter by last update date
    - in: query
      name: tag
      schema:
        type: string
      description: Filter by product tags
    - in: query
      name: category.id
      schema:
        type: integer
      description: Filter by category ID
    - in: query
      name: category.name
      schema:
        type: string
      description: Filter by category name
    - in: query
      name: sub_category.id
      schema:
        type: integer
      description: Filter by sub-category ID
    - in: query
      name: sub_category.name
      schema:
        type: string
      description: Filter by sub-category name
    - in: query
      name: supplier.id
      schema:
        type: integer
      description: Filter by supplier ID
    - in: query
      name: supplier.name
      schema:
        type: string
      description: Filter by supplier name
  responses:
    '200':
      description: List of products with company pricing information
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: './components/product-with-pricing.yaml'
              meta:
                $ref: './components/pagination-meta.yaml'
    '401':
      $ref: './components/responses/unauthorized.yaml'
    '403':
      $ref: './components/responses/forbidden.yaml'

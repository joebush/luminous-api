get:
  operationId: getContacts
  tags:
    - Contacts
  summary: Contacts
  description: |
    Get a paginated list of all contacts with optional filtering and sorting.
    
    For detailed information about the filtering system and available operators, 
    refer to the [Filter System Documentation](/filters).

    ## Available Sort Fields

    - `id` - Sort by contact ID
    - `created_at` - Sort by creation date (default: `updated_at:desc`)
    - `updated_at` - Sort by last update date (default: `updated_at:desc`)

    Sort format: `field:direction` where direction is `asc` (ascending) or `desc` (descending).
    
    Examples:
    - `?sort=id:asc` - Sort by ID ascending
    - `?sort=created_at:desc` - Sort by creation date descending
    - `?sort=updated_at:asc` - Sort by update date ascending

    ## Available Filters
    ### String Filters
    - `first_name`: Contact first name
    - `last_name`: Contact last name
    - `email`: Contact email
    - `phone`: Contact phone number
    - `status`: Contact status
    - `company.name`: Company name
    
    ### DateTime Filters
    - `created_at`: When the contact was created
    - `updated_at`: When the contact was last updated
    
    ## Examples
    ```
    # Find contacts by email domain
    ?email[like]=@example.com

    # Find contacts by company
    ?company.name[eq]=Acme Corp

    # Find contacts by status
    ?status[eq]=active

    # Find contacts by phone
    ?phone[eq]=555-123-4567

    # Find recently added contacts
    ?created_at[gte]=2024-01-01
    ```
  security:
    - BearerAuth: []
  parameters:
    - $ref: './components/parameters/page.yaml'
    - $ref: './components/parameters/limit.yaml'
    - in: query
      name: sort
      schema:
        type: string
        default: 'updated_at:desc'
      description: |
        Sort results by field and direction. Format: `field:direction`
        
        Available sort fields:
        - `id` - Contact ID
        - `created_at` - Creation date
        - `updated_at` - Last update date (default)
        
        Examples:
        - `id:asc` - Sort by ID ascending
        - `created_at:desc` - Sort by creation date descending
        - `updated_at:asc` - Sort by update date ascending
    - in: query
      name: first_name
      schema:
        type: string
      description: Filter by first name
    - in: query
      name: last_name
      schema:
        type: string
      description: Filter by last name
    - in: query
      name: email
      schema:
        type: string
      description: Filter by email address
    - in: query
      name: phone
      schema:
        type: string
      description: Filter by phone number
    - in: query
      name: status
      schema:
        type: string
      description: Filter by contact status
    - in: query
      name: company.name
      schema:
        type: string
      description: Filter by company name
    - in: query
      name: created_at
      schema:
        type: string
        format: date-time
      description: Filter by creation date
    - in: query
      name: updated_at
      schema:
        type: string
        format: date-time
      description: Filter by last update date
    
  responses:
    '200':
      description: A list of contacts
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  $ref: './components/contact.yaml'
              meta:
                $ref: './components/pagination-meta.yaml'
    '401':
      $ref: './components/responses/unauthorized.yaml'
    '403':
      $ref: './components/responses/forbidden.yaml'

post:
  operationId: createContact
  tags:
    - Contacts
  summary: Create a contact
  description: |
    Create a new contact. Only `first_name` and `company_id` are required fields.
    
    All other fields are optional and can be provided when creating the contact or updated later.
  security:
    - BearerAuth: []
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - first_name
            - company_id
          properties:
            first_name:
              type: string
              maxLength: 255
              description: Contact's first name
              example: "John"
            last_name:
              type: string
              maxLength: 255
              nullable: true
              description: Contact's last name
              example: "Smith"
            company_id:
              type: integer
              description: ID of the company this contact belongs to
              example: 123
            email:
              type: string
              format: email
              maxLength: 255
              nullable: true
              description: Contact's email address
              example: "john.smith@acmecorp.com"
            phone_1:
              type: string
              maxLength: 255
              nullable: true
              description: Contact's primary phone number
              example: "555-987-6543"
            phone_2:
              type: string
              maxLength: 255
              nullable: true
              description: Contact's secondary phone number
              example: "555-555-5555"
            receiving_bank_name:
              type: string
              maxLength: 255
              nullable: true
              description: Bank name for receiving payments
            receiving_bank_address:
              type: string
              maxLength: 255
              nullable: true
              description: Bank address for receiving payments
            is_primary:
              type: boolean
              nullable: true
              description: Whether this is the primary contact for the company
              example: false
            receive_quotation_pdf:
              type: boolean
              nullable: true
              description: Whether the contact should receive quotation PDFs
              example: false
            receive_purchase_order_pdf:
              type: boolean
              nullable: true
              description: Whether the contact should receive purchase order PDFs
              example: false
            receive_purchase_order_invoice_pdf:
              type: boolean
              nullable: true
              description: Whether the contact should receive purchase order invoice PDFs
              example: false
            tags:
              type: array
              nullable: true
              description: Tags to associate with the contact
              items:
                type: string
                maxLength: 255
              example: ["sales", "primary"]
  responses:
    '201':
      description: Contact successfully created
      content:
        application/json:
          schema:
            type: object
            properties:
              data:
                $ref: './components/contact.yaml'
    '422':
      description: Validation error
      content:
        application/json:
          schema:
            $ref: './components/validation-error.yaml'
    '401':
      $ref: './components/responses/unauthorized.yaml'
    '403':
      $ref: './components/responses/forbidden.yaml' 